<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="onsc_cv_basic_formation_form" model="ir.ui.view">
        <field name="name">onsc.cv.basic.formation.form</field>
        <field name="model">onsc.cv.basic.formation</field>
        <field name="arch" type="xml">
            <form string="Formaciones básicas">
                <sheet>
                    <div class="alert alert-danger" role="alert"
                         attrs="{'invisible': [('conditional_validation_state', '!=', 'rejected')]}">
                        <p class="mb-0">
                            <strong>
                                El registro ha sido rechazado por los siguientes motivos:
                                <field name="conditional_validation_reject_reason"/>
                            </strong>
                        </p>
                    </div>
                    <div class="alert alert-info" role="alert"
                         attrs="{'invisible': [('conditional_validation_state', '!=', 'to_validate')]}">
                        <p class="mb-0">
                            <strong>
                                El registro ingresado está en proceso de validación, se notificará el resultado de este
                                a su e-mail
                            </strong>
                        </p>
                    </div>
                    <group>
                        <group>
                            <field name="cv_digital_id" invisible="1"/>
                            <field name="basic_education_level"/>
                            <field name="institution_id"
                                   required="1"
                                   context="{'default_country_id': country_id, 'is_readonly': True}"/>
                            <field name="subinstitution_id"
                                   required="1"
                                   domain="[('institution_id', '=', institution_id)]"
                                   context="{'default_institution_id': institution_id,'default_country_id': country_id, 'is_readonly': True}"/>
                            <field name="country_id" required="1"
                                   options="{'no_create_edit':true, 'no_quick_create':true, 'no_open':true}"/>
                        </group>
                        <group>
                            <field name="state"/>
                            <field name="start_date"/>
                            <field name="end_date"
                                   attrs="{'invisible': [('state', '!=', 'completed')],'required': [('state', '=', 'completed')]}"/>
                            <field name="coursed_years"
                                   attrs="{'invisible': [('state', 'not in', ['in_progress','incomplete'])], 'required': [('state', 'in', ['in_progress','incomplete'])]}"/>
                            <field name="other_relevant_information"/>
                            <field name="study_certificate_file" filename="study_certificate_filename"
                                   options="{'accepted_file_extensions': '.pdf'}"/>
                            <field name="study_certificate_filename" invisible="1"/>
                            <field name="conditional_validation_state" invisible="1"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="onsc_cv_basic_formation_tree" model="ir.ui.view">
        <field name="name">onsc.cv.basic.formation.tree</field>
        <field name="model">onsc.cv.basic.formation</field>
        <field name="arch" type="xml">
            <tree string="Formaciones básicas" decoration-danger="conditional_validation_state == 'rejected'">
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="basic_education_level"/>
                <field name="country_id"/>
                <field name="institution_id"/>
                <field name="subinstitution_id"/>
                <field name="state"/>
                <field name="coursed_years"/>
                <field name="conditional_validation_state" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="onsc_cv_advanced_formation_form" model="ir.ui.view">
        <field name="name">onsc.cv.advanced.formation.form</field>
        <field name="model">onsc.cv.advanced.formation</field>
        <field name="arch" type="xml">
            <form string="Formaciones avanzadas">
                <sheet>
                    <div class="alert alert-danger" role="alert"
                         attrs="{'invisible': [('conditional_validation_state', '!=', 'rejected')]}">
                        <p class="mb-0">
                            <strong>
                                El registro ha sido rechazado por los siguientes motivos:
                                <field name="conditional_validation_reject_reason"/>
                            </strong>
                        </p>
                    </div>
                    <div class="alert alert-info" role="alert"
                         attrs="{'invisible': [('conditional_validation_state', '!=', 'to_validate')]}">
                        <p class="mb-0">
                            <strong>
                                El registro ingresado está en proceso de validación, se notificará el resultado de este
                                a su e-mail
                            </strong>
                        </p>
                    </div>
                    <group>
                        <group>
                            <field name="institution_id"
                                   required="1"
                                   context="{'default_country_id': country_id, 'is_readonly': True}"/>
                            <field name="subinstitution_id"
                                   required="1"
                                   domain="[('institution_id', '=', institution_id)]"
                                   context="{'default_institution_id': institution_id,'default_country_id': country_id, 'is_readonly': True}"/>
                            <field name="country_id" required="1"
                                   options="{'no_create_edit':true, 'no_quick_create':true, 'no_open':true, 'is_readonly': True}"/>
                            <field name="advanced_study_level_id"/>
                            <field name="academic_program_id"
                                   domain="[('study_level_id', '=', advanced_study_level_id), ('country_id', '=', country_id)]"
                                   context="{'default_institution_id': institution_id, 'default_subinstitution_id': subinstitution_id,
                                            'default_country_id': country_id, 'default_study_level_id': advanced_study_level_id, 'is_readonly': True}"/>
                            <field name="homologated_title"
                                   attrs="{'invisible': [('country_code', '!=', 'UY')],'required': [('country_code', '=', 'UY')]}"/>
                            <field name="homologated_title_date"
                                   attrs="{'required': [('homologated_title', '=', 'yes')]}"/>
                            <field name="apostilled_title"
                                   attrs="{'invisible': [('country_code', '!=', 'UY')],'required': [('country_code', '=', 'UY')]}"/>
                            <field name="apostilled_date"
                                   attrs="{'required': [('apostilled_title', '=', 'yes')]}"/>
                            <field name="state"/>
                            <field name="start_date"/>
                            <field name="egress_date"
                                   attrs="{'invisible': [('state', '!=', 'completed')],'required': [('state', '=', 'completed')]}"/>
                            <field name="issue_title_date"
                                   attrs="{'invisible': [('state', '!=', 'completed')],'required': [('state', '=', 'completed')]}"/>
                            <field name="is_require_thesis"/>
                            <field name="state_thesis"
                                   attrs="{'invisible': [('is_require_thesis', '=', False)],'required': [('is_require_thesis', '=', True)], 'readonly': [('state', '=', 'completed')]}"/>
                            <field name="title_thesis"
                                   attrs="{'invisible': ['|',('is_require_thesis', '=', False),('state_thesis', 'in', ['no_starting',False])],'required': [('is_require_thesis', '=', True), ('state_thesis', '!=', 'no_starting')]}"/>
                            <field name="description_thesis"
                                   attrs="{'invisible': ['|',('is_require_thesis', '=', False),('state_thesis', 'in', ['no_starting',False])],'required': [('is_require_thesis', '=', True), ('state_thesis', '!=', 'no_starting')]}"/>
                            <field name="final_note_thesis"
                                   attrs="{'invisible': ['|',('is_require_thesis', '=', False),('state_thesis', 'in', ['no_starting',False])],'required': [('is_require_thesis', '=', True), ('state_thesis', '!=', 'no_starting')]}"/>
                            <field name="max_note_thesis"
                                   attrs="{'invisible': [('final_note_thesis', 'in', [0.00,''])],'required': [('final_note_thesis', 'not in', [0.00,''])]}"/>
                        </group>
                        <group>
                            <field name="tutor"
                                   attrs="{'invisible': ['|',('is_require_thesis', '=', False),('state_thesis', 'in', ['no_starting',False])],'required': [('is_require_thesis', '=', True), ('state_thesis', '!=', 'no_starting')]}"/>
                            <field name="knowledge_thesis_ids" options="{'limit':5}" widget="many2many_tags"
                                   attrs="{'invisible': ['|',('is_require_thesis', '=', False),('state_thesis', 'in', ['no_starting',False])],'required': [('is_require_thesis', '=', True), ('state_thesis', '!=', 'no_starting')]}"/>
                            <field name="country_code" invisible="1"/>
                            <field name="scholarship"/>
                            <field name="max_scholarship"
                                   attrs="{'invisible': [('scholarship', 'in', [0.00,''])],'required': [('scholarship', 'not in', [0.00,''])]}"/>
                            <field name="credits_far"
                                   attrs="{'invisible': [('state', '=', 'completed')],'required': [('state', '!=', 'completed')]}"/>
                            <field name="credits_training"
                                   attrs="{'invisible': [('state', '=', 'completed')],'required': [('state', '!=', 'completed')]}"/>
                            <field name="knowledge_acquired_ids" options="{'limit':5}" widget="many2many_tags"/>
                            <field name="egress_certificate_file" filename="egress_certificate_filename"
                                   options="{'accepted_file_extensions': '.pdf'}"/>
                            <field name="revalidated_certificate_file" filename="revalidated_certificate_filename"
                                   options="{'accepted_file_extensions': '.pdf'}"/>
                            <field name="homologated_certificate_file" filename="homologated_certificate_filename"
                                   options="{'accepted_file_extensions': '.pdf'}"/>
                            <field name="apostille_file" filename="apostille_filename"
                                   options="{'accepted_file_extensions': '.pdf'}"/>
                            <field name="egress_certificate_filename" invisible="1"/>
                            <field name="revalidated_certificate_filename" invisible="1"/>
                            <field name="homologated_certificate_filename" invisible="1"/>
                            <field name="apostille_filename" invisible="1"/>
                            <field name="conditional_validation_state" invisible="1"/>
                        </group>
                    </group>
                    <br/>
                    <notebook>
                        <page string="Áreas relacionadas con esta educación">
                            <field name="area_related_education_ids">
                                <tree string="Formación avanzada" editable="top">
                                    <field name="educational_areas_id"/>
                                    <field name="educational_subareas_id"
                                           domain="[('area_id', '=', educational_areas_id)]"
                                           context="{'default_area_id': educational_areas_id}"/>
                                    <field name="discipline_educational_id"
                                           domain="[('subarea_id', '=', educational_subareas_id)]"
                                           context="{'default_area_id': educational_areas_id, 'default_subarea_id': educational_subareas_id}"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Otra información relevante">
                            <field name="other_relevant_information"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="onsc_cv_advanced_formation_tree" model="ir.ui.view">
        <field name="name">onsc.cv.advanced.formation.tree</field>
        <field name="model">onsc.cv.advanced.formation</field>
        <field name="arch" type="xml">
            <tree string="Formaciones avanzadas">
                <field name="start_date"/>
                <field name="egress_date"/>
                <field name="country_id"/>
                <field name="institution_id"/>
                <field name="subinstitution_id"/>
                <field name="advanced_study_level_id"/>
                <field name="state"/>
                <field name="academic_program_id"/>
                <field name="conditional_validation_state" invisible="1"/>
            </tree>
        </field>
    </record>
</odoo>
